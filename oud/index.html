<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>SOA Kobe & Robin</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <script type="text/javascript" src="jquery-3.2.1.min.js"></script> 
            <script type="text/javascript">
                function clearOw(){
                    $("#resultaatOw").text(" ");
                }
                function doeRequestOw(id) {
                    $.ajax("http://api.openweathermap.org/data/2.5/forecast?id=" + id + "&units=metric&APPID=a4a530758bce79a5b8ef70c4b2a2a71b&mode=json",
                    {
                        data: {
                            format: 'json'
                        },
                        dataType: 'json',
                        success: function (data) {
                            //alert("gelukt");
                            //var xmlString = (new XMLSerializer()).serializeToString(data);
                            var jsonString = JSON.stringify(data);
                            console.log(data);
                            //$("#resultaatOw").text(xmlString);
                            $("#resultaatOw").text(jsonString);
                            //$("#preForXMLResponse").html('<pre>'+data+'</pre>');
                           // $("#woord").html(data);
                        },
                        error: function (data) {
                            alert("fout");
                        }
                    }
                    );
                }
                function clearYh(){
                    $("#resultaatYh").text(" ");
                }
                function doeRequestYh(city,countryCode) {                    
                    $.ajax("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22" + city + "%2C%20" + countryCode +"%22)&format=xml&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",
                    {
                        data: {
                            format: 'xml'
                        },
                        dataType: 'xml',
                        success: function (data) {
                            //alert("gelukt");
                            var xmlString = (new XMLSerializer()).serializeToString(data);
                            console.log(data);
                            $("#resultaatYh").text(xmlString);
                            //$("#preForXMLResponse").html('<pre>'+data+'</pre>');
                           // $("#woord").html(data);
                        },
                        error: function (data) {
                            alert("fout");
                        }
                    }
                    );
                }
                function clearName(){
                    $("#resultaatName").text(" ");
                }
                function doeRequestName() {                    
                    $.ajax("http://usermanager-167313.appspot.com/hello?",
                    {
                        data: {
                            name: $("#naam").val(),
                            achtername: $("#achternaam").val(),                      
                            format: 'text',
                            type: "GET"
                        },
                        dataType: 'text',
                        success: function (data) {
                            //alert("gelukt");                            
                            console.log(data);
                            doeRequestOw(data);
                            doeRequestYh("hoeselt", "be");
                            $("#resultaatName").text("Hallo " + name + " het weerbericht voor uw locatie <"+ data + "> is: " );
                        },
                        error: function (data) {
                            alert("fout: heeft u: " +"https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi" + " ge√Ønstalleerd?");
                        }
                    }
                    );
                }
            </script>
    </head>
    <body>               
        <div> 
            <input type="button" value="Login" onclick="doeRequestName();" /><input type="button" value="Clear" onclick="clearName();" />
            <input type="text" id="naam" /><input type="text" id="achternaam" />
            <p id="resultaatName">         
            </p>
        </div>
        
        <div>Weather from OpenWeathermap</div>
        <div> 
            <input type="button" value="Clear" onclick="clearOw();" />
            <p id="resultaatOw">         
            </p>
        </div>
        <div>Weather from Yahoo</div>
        <div> 
            <input type="button" value="Clear" onclick="clearYh();" />
            <p id="resultaatYh">         
            </p>
        </div>
        
    </body>
</html>
